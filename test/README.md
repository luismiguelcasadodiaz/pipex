|comment      |cmd[0]            |cmd[1]            |cmd[2]            |cmd[3]            |
|-------------|------------------|------------------|------------------|------------------|
|initial      |cmd[0]->fd[0][0]  |cmd[1]->fd[1][0]  |cmd[2]->fd[2][0]  |cmd[3]->fd[3][0]  |
|status       |cmd[0]->fd[0][1]  |cmd[1]->fd[1][1]  |cmd[2]->fd[2][1]  |cmd[3]->fd[3][1]  |
|-------------|------------------|------------------|------------------|------------------|
|fork 1       |cmd[0]->fd[0][0]X |cmd[1]->fd[1][0]X |cmd[2]->fd[2][0]X |cmd[3]->fd[3][0]X |
|             |cmd[0]->fd[0][1]  |cmd[1]->fd[1][1]X |cmd[2]->fd[2][1]X |cmd[3]->fd[3][1]X |
|             |dup(*infile*  ,0) |                  |                  |                  |
|	          |dup(fd[1][1],1)   |                  |                  |                  |
|             |close(infile  )   |                  |                  |                  |
|	          |close(fd[1][1])   |                  |                  |                  |
|	          |execve()          |                  |                  |                  |
|-------------|------------------|------------------|------------------|------------------|
|fork 2       |cmd[0]->fd[0][0]  |cmd[1]->fd[1][0]X |cmd[2]->fd[2][0]X |cmd[3]->fd[3][0]X |
|             |cmd[0]->fd[0][1]X |cmd[1]->fd[1][1]  |cmd[2]->fd[2][1]X |cmd[3]->fd[3][1]X |
|             |                  |dup(fd[0][0],0)   |[i][0]            |                  |
|	          |                  |dup(fd[1][1],1)   |[i+1][1]          |                  |
|             |                  |close(fd[0][0])   |                  |                  |
|	          |                  |close(fd[1][1])   |                  |                  |
|	          |                  |execve()          |                  |                  |
|-------------|------------------|------------------|------------------|------------------|
|fork 3       |cmd[0]->fd[0][0]X |cmd[1]->fd[1][0]  |cmd[2]->fd[2][0]X |cmd[3]->fd[3][0]X |
|             |cmd[0]->fd[0][1]X |cmd[1]->fd[1][1]X |cmd[2]->fd[2][1]  |cmd[3]->fd[3][1]X |
|             |                  |                  |dup(fd[1][0],0)   |                  |
|	          |                  |                  |dup(fd[2][1],1)   |                  |
|             |                  |                  |close(fd[1][0])   |                  |
|	          |                  |                  |close(fd[2][1])   |                  |
|	          |                  |	                |execve()          |                  |
|-------------|------------------|------------------|------------------|------------------|
|fork 4       |cmd[0]->fd[0][0]X |cmd[1]->fd[1][0]X |cmd[2]->fd[2][0]  |cmd[3]->fd[3][0]X |
|             |cmd[0]->fd[0][1]X |cmd[1]->fd[1][1]X |cmd[2]->fd[2][1]X |cmd[3]->fd[3][1]X |
|             |                  |                  |                  |dup(fd[3][0],0)   |
|	          |                  |                  |                  |dup(*outfile* ,1) |
|             |                  |                  |                  |close(fd[3][0])   |
|	          |                  |                  |                  |close(*outfile* ) |
|	          |                  |                  |                  |execve()          |
